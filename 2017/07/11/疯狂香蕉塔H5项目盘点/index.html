<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="&lt;这个人很懒，什么也没有留下！ /&gt;"><title>疯狂香蕉塔H5项目盘点 | RyanGun's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/css/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">疯狂香蕉塔H5项目盘点</h1><a id="logo" href="/.">RyanGun's Blog</a><p class="description">&lt;这个人很懒，什么也没有留下！ /&gt;</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">疯狂香蕉塔H5项目盘点</h1><div class="post-meta">Jul 11, 2017<span> | </span><span class="category"><a href="/categories/Phaser/">Phaser</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><p>“疯狂香蕉塔”是在最近《神偷奶爸3》上映，京东联合环球影业和品牌资源打造小黄人IP特色活动的背景下，诞生的一个H5小游戏。人员配置：交互、视觉、前端各一枚，前端4天。<a href="https://h5.m.jd.com/dev/25XGSdjZWkN7AnB25hNvHKv1yCem/index.html" target="_blank" rel="external">点击查看</a></p>
<p><img src="//img14.360buyimg.com/cms/jfs/t5767/336/5737625680/1763/e05b761c/59649122N47442300.png" width="120"><br><img src="//img13.360buyimg.com/cms/jfs/t6469/103/2605304942/238788/f7a46a8a/596491e5N97ddab8d.png" width="300"></p>
<h3 id="玩法"><a href="#玩法" class="headerlink" title="玩法"></a>玩法</h3><p>1、点击屏幕释放箱子，每成功堆一个箱子获得相应的分数增加：香蕉箱子10分，品牌箱子20分。<br>2、箱子投放位置不对或因失去平衡倒下则游戏结束。<br>3、分数超过50分则有机会获得优惠券。<br>4、发券方式：用户每天6张券都可以领一次，每次游戏用户领到的券是随机的。如果第1、2张券发完了，将发后面没发完的券；如果所有的券都发完，返回发完；如果用户6张券都领过，返回今日已领完；如果用户领过部分，其他发完，也返回发完（返回的信息可以灵活）。<br>5、区分默认分享和有战绩的分享，实现京东站内分享和微信内分享。</p>
<p>相信大家对这种盖楼的小游戏并不陌生，玩法上大同小异，实现的技术就五花八门了。下面我们对这个H5的技术实现和遇到的一些问题进行一次复盘。</p>
<p>游戏形式定下来以后，前端首先要想的事情是如何在短时间内定出游戏的主体框架和模拟出真实的物理场景。考虑到时间成本，借助现成的游戏框架、物理引擎是最保险的方式。脑海中闪过：</p>
<h3 id="游戏框架"><a href="#游戏框架" class="headerlink" title="游戏框架"></a>游戏框架</h3><p>1、CreateJs: 虽然API齐全、多code examples，但缺乏demo、不带物理引擎，上手有一定难度；<br>2、ThreeJs: 主要做3D场景，2D有些大材小用，不带物理引擎；<br>3、Cocos2d: 非纯前端的方式，确实不太适应；<br>4、Phaser: API相对简单，官方例子众多并附代码，容易上手，内嵌Arcade、Ninja、P2三种物理引擎。</p>
<p>也是由于对Phaser有一定的认知，而且看中它提供了非常方便的状态管理和事件钩子，因此，游戏框架决定用Phaser。</p>
<h3 id="物理引擎"><a href="#物理引擎" class="headerlink" title="物理引擎"></a>物理引擎</h3><p>1、Phaser内嵌的Arcade、Ninja、P2可设置的属性依次增多，看情况使用，因为我们的箱子碰撞需要更接近真实场景、更加细腻（如弹力、摩擦力、碰撞范围等），P2可配置性高，更适合；<br>2、基于phaser的Box2d，一开始我用的是box2d，看中的是Phaser对它封装后的写法比封装后的P2更简单一些，但结合phaser使用后发现性能不太理想，而且是额外加载的phaser插件，文件体积变大，放弃。</p>
<p>实际测试对比之后，决定用Phaser中内嵌的P2引擎。</p>
<p>以上提到的这些框架和引擎，我可以说是只知皮毛，如果要用，得靠变做边查。然而要想到这些方面的东西，平常也要多关注多留意，不求一下子掌握，先大致摸索了解一下思想也不错，关键时刻可以派上用场。</p>
<h3 id="工程化"><a href="#工程化" class="headerlink" title="工程化"></a>工程化</h3><p>接着，工程化是前端开发的素养，它决定工作的效率和条理。</p>
<h4 id="一、前端自动化构建"><a href="#一、前端自动化构建" class="headerlink" title="一、前端自动化构建"></a>一、前端自动化构建</h4><p>使用前端自动化构建工具<a href="https://elf.aotu.io/" target="_blank" rel="external">ELF</a>，工具足以满足游戏的需求，具体查看ELF到底自带了哪些依赖，请点击<a href="https://github.com/o2team/elf/blob/master/package.json" target="_blank" rel="external">传送门</a>。下面额外安装的依赖是拿来做图片替换成CDN资源用的。colors: 终端打印信息的美化；crypto: 用crypto模块的哈希算法校验图片资源是否有发生变化；lowdb: 用作图片资源信息本地数据库；request: 用作发送图片上传CDN请求。这个将在最后上线部署做一个说明。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"elf start"</span>,</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"elf build &amp;&amp; gulp copy"</span>,</span><br><span class="line">    <span class="string">"build:pack"</span>: <span class="string">"elf build &amp;&amp; gulp pack &amp;&amp; gulp copy"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"colors"</span>: <span class="string">"^1.1.2"</span>,</span><br><span class="line">    <span class="string">"crypto"</span>: <span class="string">"0.0.3"</span>,</span><br><span class="line">    <span class="string">"gulp"</span>: <span class="string">"^3.9.1"</span>,</span><br><span class="line">    <span class="string">"gulp-util"</span>: <span class="string">"^3.0.8"</span>,</span><br><span class="line">    <span class="string">"lowdb"</span>: <span class="string">"^0.16.2"</span>,</span><br><span class="line">    <span class="string">"request"</span>: <span class="string">"^2.81.0"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"dependencies"</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第三方js库全部走公司CDN，游戏js最后打包成一个bundle.js引进。具体请看下面的引用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- phaser库 --&gt;</span><br><span class="line">&lt;script src=https://static.360buyimg.com/jdcopr/lib/phaser.min.js&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- 京东分享组件 --&gt;</span><br><span class="line">&lt;script src=https://storage.360buyimg.com/babel/00018849/39476/production/dev/jdShare.js&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;!-- 微信分享组件 --&gt;</span><br><span class="line">&lt;script src=https://storage.360buyimg.com/babel/00018849/39476/production/dev/share.js&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;!-- 埋点统计 --&gt;</span><br><span class="line">&lt;script src=https://wl.jd.com/unify.min.js&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>ELF主要处理的事情是：<br>1、搭建本地服务器、热替换；<br>2、设置以750宽设计稿为准，进行设备适配，px自动转化rem；<br>3、sass编译；<br>4、图片压缩、js编译压缩合并。</p>
<h4 id="二、Git托管，方便迭代和回滚。项目目录如下："><a href="#二、Git托管，方便迭代和回滚。项目目录如下：" class="headerlink" title="二、Git托管，方便迭代和回滚。项目目录如下："></a>二、Git托管，方便迭代和回滚。项目目录如下：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">collectbox</span><br><span class="line">├── src   //开发目录</span><br><span class="line">├   ├── css</span><br><span class="line">├   ├── img</span><br><span class="line">├   ├── js</span><br><span class="line">├   └── index.html</span><br><span class="line">├── tools  //工具</span><br><span class="line">├   └── helper.js //主要是nodejs文件操作</span><br><span class="line">├── .elf.config.js  //构建配置</span><br><span class="line">├── db.json  //图片cdn数据库</span><br><span class="line">├── gulpfile.js //gulp任务  </span><br><span class="line">├── .gitignore //gulp任务  </span><br><span class="line">├── package.json </span><br><span class="line">└── README.md</span><br></pre></td></tr></table></figure>
<h3 id="编写代码"><a href="#编写代码" class="headerlink" title="编写代码"></a>编写代码</h3><p>开始编码之时，需要从整体上考虑的事情是游戏的整个生命周期，围绕这个周期，我们可以很清晰的划分功能和编写代码。先预览一下文件划分，最后上线将打包合成一个bundle.js：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">├── css</span><br><span class="line">├── img</span><br><span class="line">└── js</span><br><span class="line">    ├── boot.js  //游戏启动</span><br><span class="line">    ├── game.js  //游戏入口文件</span><br><span class="line">    ├── global.js  //全局变量、数据源</span><br><span class="line">    ├── load.js  //资源预加载</span><br><span class="line">    ├── main.js  //游戏html、css、js拼接</span><br><span class="line">    ├── play.js  //物件添加和核心逻辑代码</span><br><span class="line">    ├── shareConfig.js  //分享设置</span><br><span class="line">    ├── statistic.js  //埋点统计</span><br><span class="line">    └── util.js  //工具类</span><br></pre></td></tr></table></figure></p>
<h4 id="1、游戏设备适配"><a href="#1、游戏设备适配" class="headerlink" title="1、游戏设备适配"></a>1、游戏设备适配</h4><p>这里有人就感到奇怪了，上面不是说ELF做了设备适配的工作了吗，为啥还需要适配？是的，按照常规需求，ELF已经做了。而我们的游戏在html结构上存在两部分：其一是Phaser Canvas游戏画布，其二是独立于游戏画布之外的层（各种弹出层、遮罩层，个别按钮）。只是前者采用的是Phaser自身生成、定位物件特殊的方法，而非css，自然不存在单位的转化，该部分也就无法使用ELF的适配。因此，需要单独拿出来讲，不然有人可能会走一些弯路乱搞。一个html5游戏框架如果没有设备适配的功能，那就非常不成熟了，而这时候，我非常有信心地上Phaser官网翻文档去了。果然，一条语句搞定：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 开启缩放</span><br><span class="line">game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;</span><br></pre></td></tr></table></figure></p>
<h4 id="2、Phaser的几个重要的事件钩子"><a href="#2、Phaser的几个重要的事件钩子" class="headerlink" title="2、Phaser的几个重要的事件钩子"></a>2、Phaser的几个重要的事件钩子</h4><p>用Phaser做游戏，最基本的就是知道它的几个最重要的事件钩子，掌握了它们就可以写出一个完整的Phaser游戏了。一个Phaser游戏整个面貌大致如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> game = <span class="keyword">new</span> Phaser.Game(<span class="number">800</span>, <span class="number">600</span>, Phaser.CANVAS, <span class="string">'phaser-example'</span>, &#123; </span><br><span class="line">    preload: preload, </span><br><span class="line">    create: create, </span><br><span class="line">    render: render, </span><br><span class="line">    update: update </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">preload</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="3、开启debug模式"><a href="#3、开启debug模式" class="headerlink" title="3、开启debug模式"></a>3、开启debug模式</h4><p>为了方便调试，你可能时不时开启Phaser的debug模式，我们可以看到物件的轮廓或者打印一些重要信息，只要在render钩子里面设置：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 举例子</span></span><br><span class="line">    game.debug.spriteBounds(Global.ground);</span><br><span class="line">    game.debug.cameraInfo(game.camera, <span class="number">0</span>, <span class="number">402</span>, <span class="string">''</span>, <span class="string">'25px Arial'</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="4、充分利用Phaser本身的状态管理"><a href="#4、充分利用Phaser本身的状态管理" class="headerlink" title="4、充分利用Phaser本身的状态管理"></a>4、充分利用Phaser本身的状态管理</h4><p>为了代码清晰和方便，我们实际不会像2中那样简单地使用几个事件钩子去写完我们的游戏。Phaser提供了非常强大的状态管理，有什么状态也是由自己来决定的，我们可以充分利用它的这一便利。下面是game.js的全部代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">require(&apos;./global.js&apos;); // 定义了一些全局变量，所以下面的game是全局的</span><br><span class="line"></span><br><span class="line">var bootState = require(&apos;./boot.js&apos;);</span><br><span class="line">var loadState = require(&apos;./load.js&apos;);</span><br><span class="line">var playState = require(&apos;./play.js&apos;);</span><br><span class="line">require(&apos;./shareConfig.js&apos;);</span><br><span class="line">require(&apos;./statistic.js&apos;);</span><br><span class="line"></span><br><span class="line">module.exports = function(data) &#123;</span><br><span class="line">    game.state.add(&apos;boot&apos;, bootState);</span><br><span class="line">    game.state.add(&apos;load&apos;, loadState);</span><br><span class="line">    game.state.add(&apos;play&apos;, playState);</span><br><span class="line">    game.state.start(&apos;boot&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里自然可以想到，先执行boot，boot完去执行load，load完去执行play，在play中包含了游戏结束重玩一次的状态（也可把这个状态分离出来），会由用户去触发重新走一次play，注意没必要再执行boot或者load，浪费。</p>
<h4 id="5、利用Phaser的预加载，下面是load-js的全部代码："><a href="#5、利用Phaser的预加载，下面是load-js的全部代码：" class="headerlink" title="5、利用Phaser的预加载，下面是load.js的全部代码："></a>5、利用Phaser的预加载，下面是load.js的全部代码：</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> load = <span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    create: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//load event</span></span><br><span class="line">        <span class="comment">//game.load.onLoadStart.add(this.loadStart, this);</span></span><br><span class="line">        game.load.onFileComplete.add(<span class="keyword">this</span>.fileComplete, <span class="keyword">this</span>);</span><br><span class="line">        game.load.onLoadComplete.addOnce(<span class="keyword">this</span>.loadComplete, <span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">this</span>.loadResources();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 加载资源</span></span><br><span class="line">    loadResources: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        game.load.image(<span class="string">'bg'</span>, <span class="string">'../img/bg.jpg'</span>);</span><br><span class="line">        ...</span><br><span class="line">        game.load.audio(<span class="string">'bgmusic'</span>, <span class="string">'https://static.360buyimg.com/jdcopr/activity/xhr/music.mp3'</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 执行加载</span></span><br><span class="line">        game.load.start();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 单个资源加载完成</span></span><br><span class="line">    fileComplete: <span class="function"><span class="keyword">function</span>(<span class="params">progress, cacheKey, success, totalLoaded, totalFiles</span>) </span>&#123;</span><br><span class="line">        $(<span class="string">"#progress"</span>).html(progress + <span class="string">'%'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 全部资源加载完成</span></span><br><span class="line">    loadComplete: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">'#loader'</span>).addClass(<span class="string">'scaleOut'</span>);</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="string">'#loader'</span>).remove();</span><br><span class="line">        &#125;, <span class="number">800</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 进入play</span></span><br><span class="line">        game.state.start(<span class="string">'play'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="6、模拟真实的物理场景"><a href="#6、模拟真实的物理场景" class="headerlink" title="6、模拟真实的物理场景"></a>6、模拟真实的物理场景</h4><p>这是整个游戏体验的核心，要模拟这个堆香蕉塔的真实场景，需要设置重力、碰撞面积、弹力、摩擦力等因素<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//  应用p2物理引擎</span><br><span class="line">game.physics.startSystem(Phaser.Physics.P2JS);</span><br><span class="line">// 设置重力</span><br><span class="line">game.physics.p2.gravity.y = 1800;</span><br><span class="line"></span><br><span class="line">// 碰撞材质</span><br><span class="line">worldMaterial = game.physics.p2.createMaterial(&apos;worldMaterial&apos;);</span><br><span class="line">boxMaterial = game.physics.p2.createMaterial(&apos;boxMaterial&apos;);</span><br><span class="line"></span><br><span class="line">// 设置发生碰撞的相关系数</span><br><span class="line">game.physics.p2.createContactMaterial(boxMaterial, boxMaterial, &#123;</span><br><span class="line">    stiffness: 1e100, // 弹力</span><br><span class="line">    restitution: 0, //损耗</span><br><span class="line">    friction: 10, //摩擦</span><br><span class="line">    surfaceVelocity: 0 //平面速度</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 开启箱子的物理特性，并设置碰撞范围和碰撞材质</span><br><span class="line">game.physics.p2.enable(Global.box);</span><br><span class="line">Global.box.body.setRectangle(Global.box.width, Global.box.height - 20, 0, 5);</span><br><span class="line">Global.box.body.setMaterial(boxMaterial);</span><br></pre></td></tr></table></figure></p>
<p>碰撞反馈，不管箱子发生怎样的碰撞，都会执行一次blockHit函数。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Global.box.body.onBeginContact.add(game.blockHit, <span class="keyword">this</span>);</span><br></pre></td></tr></table></figure></p>
<p>发生碰撞的时候，有两个要点。</p>
<p>其一，是如何判定箱子摆放成功与否。经过一番思考，最便捷的方法是：通过判断碰撞的时刻，摆放箱子的实际位置与其摆放成功下的位置的距离游戏世界顶部的高度差，如果该高度差大于箱子的半个身位，即可认为箱子摆放失败。而箱子的定位原点是设置在了中心点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 摆放箱子距离游戏世界顶部的距离</span><br><span class="line">Global.postTopY = Global.boxesArray[Global.boxesArray.length - 2].y;</span><br><span class="line">// 假设该箱子成功状态离顶部的高度 = 游戏世界高度 - 地面高度 - 下方箱子总高度 - 箱子半个身位</span><br><span class="line">Global.tmpY = game.world.height - Global.groundToBottom - (Global.boxesArray.length - 2) * 156 - 78;</span><br><span class="line"></span><br><span class="line">Global.posDiff = Global.postTopY - Global.tmpY;</span><br><span class="line">if (Global.posDiff &gt; 78) &#123;</span><br><span class="line">    // 堆箱子失败</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="//img12.360buyimg.com/cms/jfs/t5926/313/4834318375/63304/a2b56e73/5966e13fNedd0e290.jpg" width="400"></p>
<p>其二，是如何判断相机镜头需要往上移。镜头往上移必然发生在箱子摆放成功的情况下，当摆放的箱子距离相机镜头上方的距离小于某个阀值的情况，可以将镜头往上移动一个箱子的高度。我以屏幕高度为568的作为参考（这个可以很随意，能拿到一个大概的临界阀值就行，350为568高度下大概的临界阀值），不同屏幕高度，这个值肯定是需要做调整，因此，需要乘以一个调整系数ajustment。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Global.ajustment = game.height / <span class="number">568</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">Global.distance = Global.postTopY - game.camera.y;</span><br><span class="line"><span class="keyword">if</span> (Global.distance &lt; <span class="number">350</span> * Global.ajustment) &#123;</span><br><span class="line">    Global.cameraMoveVal = <span class="number">156</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 相机镜头缓动动画</span></span><br><span class="line">    Global.cameraTween = game.add.tween(game.camera).to(&#123; </span><br><span class="line">        y: game.camera.y - Global.cameraMoveVal </span><br><span class="line">    &#125;, <span class="number">1000</span>, Phaser.Easing.Cubic.Out, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="7、再玩一次。"><a href="#7、再玩一次。" class="headerlink" title="7、再玩一次。"></a>7、再玩一次。</h4><p>这个地方非常重要，必须把所有需要重置的变量重置，漏了就出各种bug了，我试过在这里粗心忘记把couponIndex重置，导致再玩一次的时候查询优惠券信息可能出现报错，游戏卡住。如何在不刷新的情况，简便快速地初始化游戏，非常重要。Phaser的状态管理又派上了用场，这里面重置的变量也可以改为在play的create中一开始进行一次重置，效果是一样的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">var play = module.exports = &#123;</span><br><span class="line">    create: function()&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">    restart: function() &#123;</span><br><span class="line">        // 隐藏弹窗</span><br><span class="line">        $(&apos;.modal-success,.modal-fail&apos;).removeClass(&apos;show&apos;);</span><br><span class="line">        $(&apos;.overlayer&apos;).hide();</span><br><span class="line"></span><br><span class="line">        // 重置变量</span><br><span class="line">        Global.isShowFail = true; // 允许游戏状态弹窗</span><br><span class="line">        Global.grade = 0; // 得分归0</span><br><span class="line">        Global.boxIndex = 0; // 当前最新生成的箱子索引</span><br><span class="line">        Global.boxesArray = []; // 生成的箱子数组</span><br><span class="line">        Global.canAward = true; // 允许领奖</span><br><span class="line">        Global.couponIndex = -1; // 优惠券索引</span><br><span class="line">        bgmusic.mute = true; // 背景音乐静音</span><br><span class="line">        bgmusic.destroy(); // 背景音乐销毁</span><br><span class="line"></span><br><span class="line">        // 重新走一遍play</span><br><span class="line">        game.state.start(&apos;play&apos;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    onTouchEvent: function() &#123;</span><br><span class="line">        ...</span><br><span class="line">        // 再玩一次</span><br><span class="line">        var _this = this;</span><br><span class="line">        $(&apos;.btn-again&apos;).click(_this.restart);</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="8、设置背景音乐和碰撞音效。"><a href="#8、设置背景音乐和碰撞音效。" class="headerlink" title="8、设置背景音乐和碰撞音效。"></a>8、设置背景音乐和碰撞音效。</h4><p>这里的关键点是如何设置背景音乐循环：监听音乐播放结束，再重新播放，也是依赖于Phaser便捷的音频API。在某些机子或者APP中，音频是不会自动播放的，需要统一手动执行audio.play();</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">var play = module.exports = &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    onAudioEvent: function() &#123;</span><br><span class="line">        // 添加箱子放正的声音，播放play()在碰撞反馈中执行</span><br><span class="line">        hitAudio = game.add.audio(&apos;hitAudio&apos;);</span><br><span class="line">        game.sound.setDecodedCallback([hitAudio], this.hitAudioPlay, this);</span><br><span class="line"></span><br><span class="line">        // 添加背景音乐</span><br><span class="line">        bgmusic = game.add.audio(&apos;bgmusic&apos;);</span><br><span class="line">        bgmusic.onDecoded.add(this.bgMusicStart, this);</span><br><span class="line">        bgmusic.play();</span><br><span class="line">        // 监听背景音乐结束</span><br><span class="line">        bgmusic.onStop.add(this.bgMusicComplete, this);</span><br><span class="line"></span><br><span class="line">        // 开启和关闭背景音乐</span><br><span class="line">        $(&apos;.btn-music&apos;).off(&apos;touchstart&apos;).on(&apos;touchstart&apos;, function() &#123;</span><br><span class="line">            if (!$(this).hasClass(&apos;off&apos;)) &#123;</span><br><span class="line">                $(this).addClass(&apos;off&apos;);</span><br><span class="line">                 bgmusic.pause();</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                $(this).removeClass(&apos;off&apos;);</span><br><span class="line">                bgmusic.resume();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    hitAudioPlay: function() &#123;</span><br><span class="line">        hitAudio.onStop.add(this.soundStopped, this);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // 背景音乐渐入</span><br><span class="line">    bgMusicStart: function()&#123;</span><br><span class="line">        bgmusic.fadeIn(4000);</span><br><span class="line">        // 音乐按钮禁止状态下背景音乐应该暂停</span><br><span class="line">        if($(&apos;.btn-music&apos;).hasClass(&apos;off&apos;))&#123;</span><br><span class="line">            bgmusic.pause();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // 实现背景音乐循环</span><br><span class="line">    bgMusicComplete: function()&#123;</span><br><span class="line">        bgmusic.restart();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    soundStopped: function() &#123;&#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="上线部署"><a href="#上线部署" class="headerlink" title="上线部署"></a>上线部署</h3><h4 id="1、Crypto的哈希算法"><a href="#1、Crypto的哈希算法" class="headerlink" title="1、Crypto的哈希算法"></a>1、Crypto的哈希算法</h4><p>nodejs读取本地图片生成Buffer对象后，使用crypto的哈希算法生成校验，与本地db.json中存储的图片信息进行对比，如果发生变化，则进行上传CDN操作，更新db.json<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 创建hash对象</span><br><span class="line">crypto.createHash(algorithm)</span><br><span class="line"></span><br><span class="line">// 创建摘要,data为Buffer对象</span><br><span class="line">hash.update(data)</span><br><span class="line"></span><br><span class="line">// 输出摘要内容</span><br><span class="line">hash.digest([encoding])</span><br></pre></td></tr></table></figure></p>
<p>db.json<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;img&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;md5&quot;: &quot;8cd1da24ec26c238cafa056a2112288c&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;bi_gear.png&quot;,</span><br><span class="line">      &quot;url&quot;: &quot;https://img10.360buyimg.com/opr/jfs/t5752/102/8291568425/2649/bb2d71cb/59799dc7Nb7311ed6.png&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;md5&quot;: &quot;3985a826519a06a11354c9e288aaf21d&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;btn_music.png&quot;,</span><br><span class="line">      &quot;url&quot;: &quot;https://img12.360buyimg.com/opr/jfs/t6859/293/784441135/3425/3341879b/59799dc6Nd9472b33.png&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="2、lowdb-A-small-local-database-powered-by-lodash-API"><a href="#2、lowdb-A-small-local-database-powered-by-lodash-API" class="headerlink" title="2、lowdb:  A small local database powered by lodash API"></a>2、lowdb:  A small local database powered by lodash API</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> low = <span class="built_in">require</span>(<span class="string">'lowdb'</span>);</span><br><span class="line"><span class="keyword">var</span> db = low(<span class="string">'./db.json'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set some defaults if your JSON file is empty </span></span><br><span class="line">db.defaults(&#123; </span><br><span class="line">    img: []</span><br><span class="line">&#125;).write()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增</span></span><br><span class="line">db.get(<span class="string">'img'</span>).push(&#123;</span><br><span class="line">    md5: md5,</span><br><span class="line">    name: filename,</span><br><span class="line">    url: result[filename]</span><br><span class="line">&#125;).value();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删</span></span><br><span class="line">db.get(<span class="string">'img'</span>).remove(&#123;</span><br><span class="line">    name: filename</span><br><span class="line">&#125;).value();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查</span></span><br><span class="line">db.get(<span class="string">'img'</span>).find(&#123;</span><br><span class="line">    md5: md5,</span><br><span class="line">    name: name</span><br><span class="line">&#125;).value()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 改</span></span><br><span class="line">db.get(<span class="string">'img'</span>).find(&#123;</span><br><span class="line">    name: name</span><br><span class="line">&#125;).set(<span class="string">'url'</span>, <span class="string">'https://......'</span>).value()</span><br></pre></td></tr></table></figure>
<h4 id="3、File-System-文件系统"><a href="#3、File-System-文件系统" class="headerlink" title="3、File System(文件系统)"></a>3、File System(文件系统)</h4><p>cdn替换涉及到深度遍历文件、字符窜匹配、强制写入文件，属于nodejs的fs模块和stream模块的API使用，代码有点长，github上类似这样的代码也有很多。</p>
<h4 id="4、输出生产目录"><a href="#4、输出生产目录" class="headerlink" title="4、输出生产目录"></a>4、输出生产目录</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 输出生产目录dist</span><br><span class="line">npm run build</span><br><span class="line"></span><br><span class="line">// 输出生产目录dist并生成zip压缩包</span><br><span class="line">npm run build:pack</span><br><span class="line"></span><br><span class="line">// 上传CDN</span><br><span class="line">gulp uploadimg</span><br><span class="line"></span><br><span class="line">// 图片资源CDN替换，生成多一个CDN化的_dist</span><br><span class="line">gulp cdnimg</span><br></pre></td></tr></table></figure>
<p>整个游戏比较关键的点也就上面提到的一些，另外像领奖和分享，只要按照玩法的中规则，耐心地写一下，也不难。纵览整个游戏，其实就是Phaser API的运用，加上ELF做开发环境。如果要说里面最大的挑战是什么，不是技术实现，而是心态。如何在只对Phaser只有基本的认知水平下，不浮躁心急，保持思路的清晰，耐心一个个问题查找解决。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://ryangun.github.io/2017/07/11/疯狂香蕉塔H5项目盘点/" data-id="cjprrk133001ml3emaqeuxywt" class="article-share-link">分享到</a><div class="tags"><a href="/tags/H5/">H5</a></div><div class="post-nav"><a href="/2018/01/04/Phaser基础篇上/" class="pre">Phaser基础篇上</a><a href="/2016/10/27/WebVR的一种实现方式/" class="next">WebVR的一种实现方式</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://ryangun.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Phaser/">Phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/html-css/">html/css</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mac/">mac</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动端/">移动端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/笔记/">笔记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/css3/" style="font-size: 15px;">css3</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/tools/" style="font-size: 15px;">tools</a> <a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/备忘/" style="font-size: 15px;">备忘</a> <a href="/tags/html-css/" style="font-size: 15px;">html/css</a> <a href="/tags/调试/" style="font-size: 15px;">调试</a> <a href="/tags/命令行/" style="font-size: 15px;">命令行</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/动画/" style="font-size: 15px;">动画</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/vuejs/" style="font-size: 15px;">vuejs</a> <a href="/tags/移动端/" style="font-size: 15px;">移动端</a> <a href="/tags/工作流/" style="font-size: 15px;">工作流</a> <a href="/tags/Webpack/" style="font-size: 15px;">Webpack</a> <a href="/tags/用户体验/" style="font-size: 15px;">用户体验</a> <a href="/tags/H5/" style="font-size: 15px;">H5</a> <a href="/tags/WebVR/" style="font-size: 15px;">WebVR</a> <a href="/tags/Phaser/" style="font-size: 15px;">Phaser</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/js/" style="font-size: 15px;">js</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/12/12/Axios/">Axios</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/11/VueRouter/">VueRouter</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/25/原生实现/">原生实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/05/Phaser物理引擎篇/">Phaser物理引擎篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/26/Phaser交互篇/">Phaser交互篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/29/Phaser动画篇/">Phaser动画篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/18/Phaser基础篇下/">Phaser基础篇下</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/04/Phaser基础篇上/">Phaser基础篇上</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/11/疯狂香蕉塔H5项目盘点/">疯狂香蕉塔H5项目盘点</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/27/WebVR的一种实现方式/">WebVR的一种实现方式</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://element.jd.com/" title="未知素" target="_blank">未知素</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">RyanGun's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>